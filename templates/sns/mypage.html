{% extends 'sns/base.html' %}

{% block content %}

    <!-- プロフィール情報 -->

    <h2>{{ object.user_id }}</h2>
    {% if not user.is_authenticated %}    <!-- 自分以外のページ -->
        {% if object.user_id in connection.0.following.all %}<!-- contextから情報が渡ってきている -->
            <a href="{% url 'follow_mypage' object.user_id %}" class="btn btn-danger ms-3" tabindex="-1" role="button" aria-disabled="true">フォロー解除</a>
        {% else %}
            <a href="{% url 'follow_mypage' object.user_id %}" class="btn btn-primary ms-3" tabindex="-1" role="button" aria-disabled="true">フォロー</a>
        {% endif %}
    {% endif %}

    {% for post in object_list %}
        {% if  post.user_id == user.username %}
            <div>
                <p>{{ post.caption|linebreaksbr }}</p>
                <p>{{ post.post_date }}</p>
                <a href="{% url 'detail' post.pk %}">詳細</a>
                <p>-------------------------</p>
            </div>
        {% endif %}
    {% endfor %}

{% endblock %}